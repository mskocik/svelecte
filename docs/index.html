<!DOCTYPE html>
<html lang="en" class="auto-scaling-disabled">

<head>
  <!-- Meta tags -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Favicon and title -->
  <link rel='icon' type='image/png' href='static/favicon.png'>
  <link rel='stylesheet' href='static/global.css'>
  <link rel="stylesheet" href="static/spectre.css">
  <link rel='stylesheet' href='assets/docs.css'>

  <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/styles/default.min.css">
  <script src="https://unpkg.com/@highlightjs/cdn-assets@10.7.2/highlight.min.js"></script>
  <script src="https://unpkg.com/highlightjs-svelte/dist/svelte.min.js"></script>

  <style>
    el-svelecte {
      display: block;
      position: relative;
      margin-bottom: 1rem;
    }

    el-svelecte select {
      opacity: 0;
    }

    .color {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 0.5rem;
      margin-left: 3px;
      box-shadow: 0 0 4px #ccc;
      display: inline-block;
    }
  </style>
  <title>Svelecte - select with autocomplete written in Svelte</title>
</head>

<body>
  <div class="columns">
    <div class="column col-2 col-xl-3 col-lg-3 hide-md">
      <div class="nav-wrap">
        <div class="docs-brand pt-2">
          <h3 class="text-center mb-0">Svelecte</h3>
        </div>
        <div class="docs-nav p-2">
          <ul class="menu mx-2">
            <li class="menu-item">
              <a href="#sub-intro">Getting started</a>
            </li>
            <li class="divider" data-content="Basic examples"></li>
            <li class="menu-item"><a href="#sub-basic-example">Basic example</a></li>
            <li class="menu-item"><a href="#sub-opt-groups">Option groups</a></li>
            <li class="menu-item"><a href="#sub-item-rendering">Custom item rendering</a></li>
            <li class="menu-item"><a href="#sub-icon-slot">Icon slot</a></li>
            <li class="menu-item"><a href="#sub-remote-data">Remote datasource</a></li>
            <li class="divider" data-content="Advanced examples"></li>
            <li class="menu-item"><a href="#sub-playground">Playground</a></li>
            <li class="menu-item"><a href="#sub-custom-component">Custom component</a></li>
            <li class="divider" data-content="Configuration"></li>
            <li class="menu-item"><a href="#sub-options">Options</a></li>
            <li class="menu-item"><a href="#sub-api">API</a></li>
          </ul>
        </div>
      </div>
    </div>


    <div class="column col-10 col-xl-8 col-lg-9 col-md-12">
      <div class="container">

        <div class="columns">
          <div class="column col-lg-6 col-md-12">
            <h1>Svelecte</h1>
            <p>
              Svelecte provide basically every (hopefully) common functionality, you would expect from
              autocomplete/select
              component. It's main inspiration was selectize.js
            </p>

            <h3 id="intro">Getting started</h3>

            <p>Svelecte can be used in your Svelte app or used as a standalone <a
                href="https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements"
                target="_blank">custom element</a>.</p>

            <h5>Install from npm</h5>

            <pre class="code" data-lang="CLI"><code>npm install svelecte --save</code></pre>
          </div>
          <div class="column col-lg-6 col-md-12">

          </div>
        </div>

        <!-- basic -->
        <div class="section container">
          <div class="columns">
            <div class="column col-lg-12 col-xl-6">
              <h4 id="sub-basic-example">Basic Usage</h4>
              <div id="example-1"></div>

              <details class="mt-2">
                <summary>Related properties:</summary>
                <div class="mt-2">
                  <dl>
                    <dt><span class="label">options:</span> <code>array</code></dt>
                    <dd>Array of items. Svelecte support plain or object array as <code>options</code> property. By
                      default
                      it converts plain string items to object with <code>value</code> and <code>label</code>
                      properties.</dd>
                  </dl>
                  <dl>
                    <dt><span class="label">valueField:</span> <code>string|null</code></dt>
                    <dd>
                      Specify which property is used as value. This value is returned as <code>value</code>. If not
                      specified, property will be resolved automatically.
                    </dd>
                  </dl>
                  <dl>
                    <dt><span class="label">labelField:</span> <code>string|null</code></dt>
                    <dd>
                      Specify which property should be shown. If not specified, property will be resolved automatically.
                    </dd>
                  </dl>
                  <dl>
                    <dt><span class="label">multiple:</span> <code>bool</code></dt>
                    <dd>
                      Toggle multiselection. Check <a href="#sub-playground">playground</a> example.
                    </dd>
                  </dl>
                </div>
              </details>

              <details>
                <summary>Exposed selection properties:</summary>
                <div class="mt-2">
                  Selection is <b>always</b> an array, when <code>multiple</code> is set to <code>true</code>.
                  <dl>
                    <dt><span class="label">bind:selection:</span> &rarr; <code>array|object|null</code></dt>
                    <dd>Return selected object / array of objects</dd>
                  </dl>
                  <dl>
                    <dt><span class="label">bind:value:</span> &rarr; <code>array|mixed|null</code></dt>
                    <dd>Returns only <code>valueField</code> property / array like in normal selects.
                  </dl>
                </div>
              </details>

            </div>
            <div class="column col-lg-12 col-xl-6">
              <details>
                <summary>Show code</summary>
                <div id="anchor-basic-example"></div>
              </details>
            </div>
          </div>
          <div class="columns">
            <div class="column col-lg-12 col-xl-6">
              <p>Example of plain array options and variable <code>value</code> output:</p>
              <div id="example-2"></div>

              <details class="mt-2">
                <summary>Related properties:</summary>
                <div class="mt-2">
                  <dl>
                    <dt><span class="label">labelAsValue:</span> <code>bool</code></dt>
                    <dd>
                      For plain array options you can also specify if you are interested in <code>value</code> or
                      <code>label</code> property
                      by setting <code>labelAsValue</code> property to true.
                    </dd>
                  </dl>
                </div>
              </details>
            </div>
            <div class="column col-lg-12 col-xl-6">
              <details>
                <summary>Show code</summary>
                <div id="anchor-basic-example"></div>
              </details>
            </div>
          </div>
        </div>

        <!-- groups -->
        <div class="section">
          <div class="columns">
            <div class="column col-lg-12 col-xl-6">
              <h4 id="sub-opt-groups">Option groups</h4>
              <div id="example-3"></div>
              <p class="mt-2">Optgroups are defined as objects with <code>label</code> and <code>options</code>
                properties.
                Optgroup labels are customizable by styling <code>.optgroup-header</code> class.
              </p>
            </div>
            <div class="column col-lg-12 col-xl-6">
              <details>
                <summary>Show code</summary>
                <div id="anchor-groups"></div>
              </details>
            </div>
          </div>
        </div>

        <!-- rendering -->
        <div class="section">
          <div class="columns">
            <div class="column col-lg-12 col-xl-6">
              <h4 id="sub-item-rendering">Custom item rendering</h4>
              <div id="example-4"></div>

              <p class="mt-2">You can define custom renderer function, which takes current option and return HTML
                string.
                Your renderer can display selected items differently due second function argument.
              </p>
              <details class="mt-2">
                <summary class="mt-2">Related properties:</summary>
                <div class="mt-2">
                  <dl>
                    <dt>
                      <span class="label">renderer:</span>
                      <code>string | fn(item : object|string, isSelected: bool) -> string</code>
                    </dt>
                    <dd>
                      If <code>string</code> is passed, context renderer with given name is being used. You can add new
                      renderers
                      through context function <code>addFormatter(name: string, formatFn: function)</code>.
                      <code>formatFn</code> function can expect
                      arguments specified above.

                      <p class="mt-2">By default <code>labelField</code> is used to render visible text.</p>
                    </dd>
                  </dl>
                </div>
              </details>
            </div>
            <div class="column col-lg-12 col-xl-6">
              <details>
                <summary>Show code</summary>
                <div id="anchor-renderer"></div>
              </details>
            </div>
          </div>
        </div>

        <!-- slot -->
        <div class="section">
          <div class="columns">
            <div class="column col-lg-12 col-xl-6">
              <h4 id="sub-icon-slot">Icon slot</h4>
              <div id="example-5"></div>
              <p class="mt-2">You can provide icon by defining <code>icon</code> slot content</p>
            </div>
            <div class="column col-lg-12 col-xl-6"></div>
          </div>
        </div>

        <!-- fetch -->
        <div class="section">
          <div class="columns">
            <div class="column col-lg-12 col-xl-6">

              <h4 id="sub-fetch">Remote datasource</h4>

              <div id="example-6"></div>
              <details class="mt-2">

                <summary>Related properties:</summary>
                <div class="mt-2">

                  <dl>
                    <dt><span class="label">fetch:</span> <code>string|null</code></dt>
                    <dd>string specifying remote endpoint, ie: <code>https://example.com/url?search=[query]</code></dd>
                  </dl>
                  <dl>
                    <dt><span class="label">fetchMode:</span> <code>string</code></dt>
                    <dd>
                      <code class="col-offset-1">init</code> - remote dataset is fetched immediately upon
                      setting, searching is conducted only among available items. Fetch fallbacks to <code>init</code>
                      also
                      when <code>fetch</code> is string and <code>[query]</code> placeholder is not specified.<br>
                      <code>auto</code> - remote search query is triggered when typing, but <b>it expects</b>
                      <code>[query]</code> placeholder in <code>fetch</code> property. This is default value.
                    </dd>
                  </dl>
                  <dl>
                    <dt><span class="label">fetchCallback:</span> <code>?fn(jsonResponse: object): array</code></dt>
                    <dd>
                      Response transform function. It contains JSON-ized response.
                      If not specified, one of following properties are tried in given order: <code>data</code>,
                      <code>items</code>,
                      <code>options</code> or response JSON itself as a fallback.
                    </dd>
                  </dl>
                </div>
              </details>
            </div>
            <div class="column col-lg-12 col-xl-6">
              <details>
                <summary>Show code</summary>
                <div id="anchor-fetch"></div>
              </details>
            </div>
          </div>
        </div>

        <hr>

        <!-- playground app -->
        <div class="section">
          <div id="example-7"></div>
          <div>
            <h2>Svelecte as custom element</h2>

            <p>Download the latest version manually <a class="btn btn-primary"
                href="https://github.com/mskocik/svelecte/releases/latest">from GitHub</a></p>

            <h5>Download custom element version from CDN</h5>

            <pre data-lang="html"><code class="html">
 &lt;link rel="stylesheet" href="https://unpkg.com/svelecte/dist/svelecte.css"&gt;
 &lt;script src="https://unpkg.com/svelecte/dist/svelecte.min.js"&gt;/script&gt;
</code></pre>
            <el-svelecte renderer="dotted" creatable multiple></el-svelecte>
            <hr>
            <form action="">
              <h3>Select item group (dependend selects)</h3>
              <el-svelecte
                options='[{"value":"posts","text":"Posts"},{"value":"users","text":"Users"},{"value":"comments","text":"Comments"}]'
                id="is-parent" required>
                <select name="someProp" id="existingSelect" required></select>
              </el-svelecte>
              <el-svelecte name="color" parent="is-parent" required
                fetch="https://jsonplaceholder.typicode.com/[parent]">
              </el-svelecte>
              <button type="submit">Send form</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- CODE EXAMPLES -->
  <pre data-anchor="anchor-basic-example">
<code class="svelte">
const plainArrayOptions = [
  'Albania'
  'Andorra'
  //... other options
];

const options = [
  {
    value: 'al',
    text: 'Albania'
  },
  {
    value: 'ad',
    text: 'Andorra'
  },
  //... other options
];
let selectedValue = null; // contains only 'value' prop 
let selectedItem = null;

&lt;Svelecte {options} bind:selection={selectedItem} bind:value={selectedValue}>&lt;/Svelecte></code>
</pre>

  <pre data-anchor="anchor-groups"><code class="svelte">
const options =[
  {
    label: 'A',
    options: [
      {
        value: 'al',
        text: 'Albania'
      },
      {
        value: 'ad',
        text: 'Andorra'
      },
      {
        value: 'am',
        text: 'Armenia'
      },
      {
        value: 'a',
        text: 'Austria'
      },
      {
        value: 'az',
        text: 'Azerbaijan'
      }]
  },
  // other groups or non-grouped items
];

&lt;Svelecte {options}>&lt;/Svelecte></code>
</code></pre>

  <pre data-anchor="anchor-renderer"><code class="svelte">
function colorRenderer(item, isSelected) {
  if (isSelected) {
    return `&lt;div class="color-item" style="background-color: ${item.hex}">Selected color&lt;/div>`;
  }
  return `&lt;span class="color-item" style="background-color: ${item.hex}">&lt;/span>${item.text}`;
}

&lt;Svelecte {options} renderer={colorRenderer}>&lt;/Svelecte></code>

<pre data-anchor="anchor-slot"><code class="svelte">
let iconValue = null;
$: iconSlot = iconValue 
  ? (iconValue.value === 'black' ? 'ðŸ’€' : 'ðŸ‘')
  : 'ðŸ‘‰';

&lt;Svelecte {options} bind:selection={iconValue}>
  &lt;b slot="icon">{iconSlot}.&lt;/b>
&lt;/Svelecte>
 </code></pre>

  <pre data-anchor="anchor-fetch"><code class="svelte">
&lt;Svelecte
  placeholder="Start typing ('re' for example)"
  fetch="https://my-json-server.typicode.com/mskocik/svelecte-db/colors?value_like=[query]"
&lt;</Svelecte>
 </code></pre>

  <script src='assets/docs.js' defer></script>

  <script>
    setTimeout(() => {

      document.querySelectorAll('pre[data-anchor]')
        .forEach(codeBlock => {
          console.log(codeBlock.dataset.anchor);
          document.getElementById(codeBlock.dataset.anchor).appendChild(codeBlock)
        })
      hljs.highlightAll();
    }, 500);
  </script>
</body>

</html>